---
const nav = [
  { href: '/', label: 'Home' },
  { href: '/curriculum', label: 'Curriculum' },
  { href: '/community', label: 'Community' },
  { href: '/blog', label: 'Blog' },
  { href: '/join', label: 'Join' },
  { href: '/contact', label: 'Contact' },
  { href: '/about', label: 'About' }
];

const pathname = Astro.url.pathname;
---

<header class="sticky top-0 z-40 border-b border-white/10 bg-slate-900/75 backdrop-blur">
  <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-4 sm:px-6 lg:px-8">
    <a href="/" class="flex items-center gap-3">
      <img
        src="/b3-logo.png"
        alt="Bricks, Blocks, and Bots logo"
        class="h-11 w-auto sm:h-12"
        loading="eager"
      />
      <span class="hidden font-display text-base font-black leading-tight sm:inline-flex sm:flex-col">
        <span>
          <span class="text-builder">Bricks,</span>{' '}
          <span class="text-pixel">Blocks</span>
        </span>
        <span class="text-circuit">and Bots</span>
      </span>
    </a>
    <nav class="hidden gap-5 text-sm font-semibold md:flex">
      {nav.map((item) => (
        <a
          href={item.href}
          class:list={[
            'transition hover:text-builder',
            pathname === item.href || (item.href !== '/' && pathname.startsWith(item.href))
              ? 'text-builder'
              : 'text-slate-200'
          ]}
        >
          {item.label}
        </a>
      ))}
    </nav>
    <div class="flex items-center gap-2">
      <button
        type="button"
        data-theme-toggle
        class="rounded-full border border-white/10 bg-white/40 p-1.5 text-slate-500 transition hover:border-white/20 hover:text-slate-700"
        aria-label="Switch to black theme"
        title="Toggle theme"
      >
        <svg
          data-theme-icon-light
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg data-theme-icon-dark xmlns="http://www.w3.org/2000/svg" class="hidden h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
        </svg>
      </button>
      <details class="relative md:hidden">
        <summary class="list-none cursor-pointer rounded-full border border-white/10 bg-white/5 p-1.5 text-slate-200">
          <span class="sr-only">Open menu</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </summary>
        <nav class="absolute right-0 mt-3 w-52 rounded-xl border border-white/10 bg-slate-900/95 p-2 shadow-xl backdrop-blur">
          {nav.map((item) => (
            <a
              href={item.href}
              class:list={[
                'block rounded-lg px-3 py-2 text-sm font-semibold transition hover:bg-white/10 hover:text-builder',
                pathname === item.href || (item.href !== '/' && pathname.startsWith(item.href))
                  ? 'text-builder'
                  : 'text-slate-200'
              ]}
            >
              {item.label}
            </a>
          ))}
        </nav>
      </details>
    </div>
  </div>
</header>
